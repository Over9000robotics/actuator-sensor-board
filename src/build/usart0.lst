   1               		.file	"usart0.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               	.global	USART0_init
  13               	USART0_init:
  14               	.LFB7:
  15               		.file 1 "usart0.c"
   1:usart0.c      **** #include <avr/io.h>
   2:usart0.c      **** #include <avr/interrupt.h>
   3:usart0.c      **** #include <stdint.h>
   4:usart0.c      **** #include <util/delay.h>
   5:usart0.c      **** 
   6:usart0.c      **** #include "usart0.h"
   7:usart0.c      **** 
   8:usart0.c      **** #define CLOCK_FQ (16000000)
   9:usart0.c      **** 
  10:usart0.c      **** void USART0_init(uint32_t baud)
  11:usart0.c      **** {
  16               		.loc 1 11 0
  17               		.cfi_startproc
  18               	.LVL0:
  19               	/* prologue: function */
  20               	/* frame size = 0 */
  21               	/* stack size = 0 */
  22               	.L__stack_usage = 0
  12:usart0.c      **** 	uint32_t temp_baud = 0;
  13:usart0.c      **** 
  14:usart0.c      **** 	temp_baud = (CLOCK_FQ / (8 * baud)) - 1;
  23               		.loc 1 14 0
  24 0000 9B01      		movw r18,r22
  25 0002 AC01      		movw r20,r24
  26 0004 83E0      		ldi r24,3
  27               		1:
  28 0006 220F      		lsl r18
  29 0008 331F      		rol r19
  30 000a 441F      		rol r20
  31 000c 551F      		rol r21
  32 000e 8A95      		dec r24
  33 0010 01F4      		brne 1b
  34 0012 60E0      		ldi r22,0
  35 0014 74E2      		ldi r23,lo8(36)
  36 0016 84EF      		ldi r24,lo8(-12)
  37 0018 90E0      		ldi r25,0
  38               	.LVL1:
  39 001a 0E94 0000 		call __udivmodsi4
  40 001e BA01      		movw r22,r20
  41 0020 A901      		movw r20,r18
  42 0022 4150      		subi r20,1
  43 0024 5109      		sbc r21,__zero_reg__
  44 0026 6109      		sbc r22,__zero_reg__
  45 0028 7109      		sbc r23,__zero_reg__
  46               	.LVL2:
  15:usart0.c      **** 	
  16:usart0.c      **** 	//Set baud rate
  17:usart0.c      **** 	UBRR0H = (unsigned char) (temp_baud >> 8);
  47               		.loc 1 17 0
  48 002a BB27      		clr r27
  49 002c A72F      		mov r26,r23
  50 002e 962F      		mov r25,r22
  51 0030 852F      		mov r24,r21
  52 0032 8093 C500 		sts 197,r24
  18:usart0.c      **** 	UBRR0L = (unsigned char) temp_baud;
  53               		.loc 1 18 0
  54 0036 4093 C400 		sts 196,r20
  19:usart0.c      **** 
  20:usart0.c      **** 	UCSR0A |= (1 << U2X0);
  55               		.loc 1 20 0
  56 003a E0EC      		ldi r30,lo8(-64)
  57 003c F0E0      		ldi r31,0
  58 003e 8081      		ld r24,Z
  59 0040 8260      		ori r24,lo8(2)
  60 0042 8083      		st Z,r24
  21:usart0.c      **** 
  22:usart0.c      **** 	UCSR0B |= (1 << RXEN0);	// Enable RX
  61               		.loc 1 22 0
  62 0044 E1EC      		ldi r30,lo8(-63)
  63 0046 F0E0      		ldi r31,0
  64 0048 8081      		ld r24,Z
  65 004a 8061      		ori r24,lo8(16)
  66 004c 8083      		st Z,r24
  23:usart0.c      **** 	
  24:usart0.c      **** 	DDRE |= (1 << PE1);			// Set TX as output
  67               		.loc 1 24 0
  68 004e 699A      		sbi 0xd,1
  25:usart0.c      **** 	DDRE &= ~(1 << PE0);		// Set RX as input
  69               		.loc 1 25 0
  70 0050 6898      		cbi 0xd,0
  26:usart0.c      **** 	
  27:usart0.c      **** 	UCSR0B |= (1 << TXEN0);		//Enable TX
  71               		.loc 1 27 0
  72 0052 8081      		ld r24,Z
  73 0054 8860      		ori r24,lo8(8)
  74 0056 8083      		st Z,r24
  28:usart0.c      **** 	UCSR0B &= ~(1 << UCSZ02);	//Data size
  75               		.loc 1 28 0
  76 0058 8081      		ld r24,Z
  77 005a 8B7F      		andi r24,lo8(-5)
  78 005c 8083      		st Z,r24
  29:usart0.c      **** 	
  30:usart0.c      **** 	// async, no parity, 1 stop bit, 8 bit data size	
  31:usart0.c      **** 	UCSR0C &= ~(1 << 7);
  79               		.loc 1 31 0
  80 005e E2EC      		ldi r30,lo8(-62)
  81 0060 F0E0      		ldi r31,0
  82 0062 8081      		ld r24,Z
  83 0064 8F77      		andi r24,lo8(127)
  84 0066 8083      		st Z,r24
  32:usart0.c      **** 	UCSR0C &= ~(1 << UMSEL0);
  85               		.loc 1 32 0
  86 0068 8081      		ld r24,Z
  87 006a 8F7B      		andi r24,lo8(-65)
  88 006c 8083      		st Z,r24
  33:usart0.c      **** 	UCSR0C &= ~(1 << UPM01) ;
  89               		.loc 1 33 0
  90 006e 8081      		ld r24,Z
  91 0070 8F7D      		andi r24,lo8(-33)
  92 0072 8083      		st Z,r24
  34:usart0.c      **** 	UCSR0C &= ~(1 << UPM00);
  93               		.loc 1 34 0
  94 0074 8081      		ld r24,Z
  95 0076 8F7E      		andi r24,lo8(-17)
  96 0078 8083      		st Z,r24
  35:usart0.c      **** 	UCSR0C &= ~(1 << USBS0);
  97               		.loc 1 35 0
  98 007a 8081      		ld r24,Z
  99 007c 877F      		andi r24,lo8(-9)
 100 007e 8083      		st Z,r24
  36:usart0.c      **** 	UCSR0C &= ~(1 << USBS0);
 101               		.loc 1 36 0
 102 0080 8081      		ld r24,Z
 103 0082 877F      		andi r24,lo8(-9)
 104 0084 8083      		st Z,r24
  37:usart0.c      **** 	UCSR0C |= (1 << UCSZ01);
 105               		.loc 1 37 0
 106 0086 8081      		ld r24,Z
 107 0088 8460      		ori r24,lo8(4)
 108 008a 8083      		st Z,r24
  38:usart0.c      **** 	UCSR0C |= (1 << UCSZ00);
 109               		.loc 1 38 0
 110 008c 8081      		ld r24,Z
 111 008e 8260      		ori r24,lo8(2)
 112 0090 8083      		st Z,r24
 113 0092 0895      		ret
 114               		.cfi_endproc
 115               	.LFE7:
 117               	.global	USART0_transmit
 119               	USART0_transmit:
 120               	.LFB8:
  39:usart0.c      **** 
  40:usart0.c      **** }
  41:usart0.c      **** 
  42:usart0.c      **** void USART0_transmit(unsigned char data)
  43:usart0.c      **** {
 121               		.loc 1 43 0
 122               		.cfi_startproc
 123               	/* prologue: function */
 124               	/* frame size = 0 */
 125               	/* stack size = 0 */
 126               	.L__stack_usage = 0
 127               	.LVL3:
 128               	.L3:
  44:usart0.c      **** 	while ( ! ( UCSR0A & (1<<UDRE0))); //Wait for empty transmit buffer
 129               		.loc 1 44 0 discriminator 1
 130 0094 9091 C000 		lds r25,192
 131 0098 95FF      		sbrs r25,5
 132 009a 00C0      		rjmp .L3
  45:usart0.c      **** 
  46:usart0.c      **** 	UDR0 = data; //Put data into buffer, sends the data
 133               		.loc 1 46 0
 134 009c 8093 C600 		sts 198,r24
 135 00a0 0895      		ret
 136               		.cfi_endproc
 137               	.LFE8:
 139               	.global	USART0_receive
 141               	USART0_receive:
 142               	.LFB9:
  47:usart0.c      **** }
  48:usart0.c      **** 
  49:usart0.c      **** unsigned char USART0_receive(void)
  50:usart0.c      **** {
 143               		.loc 1 50 0
 144               		.cfi_startproc
 145               	/* prologue: function */
 146               	/* frame size = 0 */
 147               	/* stack size = 0 */
 148               	.L__stack_usage = 0
 149               	.L8:
  51:usart0.c      **** 	while ( ! (UCSR0A & (1<<RXC0)));
 150               		.loc 1 51 0 discriminator 1
 151 00a2 8091 C000 		lds r24,192
 152 00a6 87FF      		sbrs r24,7
 153 00a8 00C0      		rjmp .L8
  52:usart0.c      **** 
  53:usart0.c      **** 	return UDR0;
 154               		.loc 1 53 0
 155 00aa 8091 C600 		lds r24,198
  54:usart0.c      **** }
 156               		.loc 1 54 0
 157 00ae 0895      		ret
 158               		.cfi_endproc
 159               	.LFE9:
 161               	.Letext0:
 162               		.file 2 "/usr/lib/avr/include/stdint.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 usart0.c
     /tmp/ccKmycsR.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccKmycsR.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccKmycsR.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccKmycsR.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccKmycsR.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccKmycsR.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccKmycsR.s:13     .text:0000000000000000 USART0_init
     /tmp/ccKmycsR.s:119    .text:0000000000000094 USART0_transmit
     /tmp/ccKmycsR.s:141    .text:00000000000000a2 USART0_receive

UNDEFINED SYMBOLS
__udivmodsi4
