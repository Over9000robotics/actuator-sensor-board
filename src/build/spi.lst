   1               		.file	"spi.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               	.global	SPI_slave_init
  13               	SPI_slave_init:
  14               	.LFB6:
  15               		.file 1 "spi.c"
   1:spi.c         **** #include <avr/io.h>
   2:spi.c         **** #include <avr/interrupt.h>
   3:spi.c         **** #include <stdint.h>
   4:spi.c         **** #include <util/delay.h>
   5:spi.c         **** 
   6:spi.c         **** /**
   7:spi.c         ****  * SPI Frequency: 16 000 000 / 32 = 500000
   8:spi.c         ****  * No interrupt
   9:spi.c         ****  */
  10:spi.c         **** 
  11:spi.c         **** void SPI_slave_init(void)
  12:spi.c         **** {
  16               		.loc 1 12 0
  17               		.cfi_startproc
  18               	/* prologue: function */
  19               	/* frame size = 0 */
  20               	/* stack size = 0 */
  21               	.L__stack_usage = 0
  13:spi.c         **** 	DDRB |= (1<<PB3); // Set MISO output, all others input
  22               		.loc 1 13 0
  23 0000 239A      		sbi 0x4,3
  14:spi.c         **** 	SPCR = (1<<SPE); // Enable SPI 
  24               		.loc 1 14 0
  25 0002 80E4      		ldi r24,lo8(64)
  26 0004 8CBD      		out 0x2c,r24
  15:spi.c         **** 	
  16:spi.c         **** 	SPCR |= (1 << SPR1); //fclk / 32
  27               		.loc 1 16 0
  28 0006 8CB5      		in r24,0x2c
  29 0008 8260      		ori r24,lo8(2)
  30 000a 8CBD      		out 0x2c,r24
  17:spi.c         **** 	SPSR |= (1 << SPI2X);
  31               		.loc 1 17 0
  32 000c 8DB5      		in r24,0x2d
  33 000e 8160      		ori r24,lo8(1)
  34 0010 8DBD      		out 0x2d,r24
  35 0012 0895      		ret
  36               		.cfi_endproc
  37               	.LFE6:
  39               	.global	SPI_receive
  41               	SPI_receive:
  42               	.LFB7:
  18:spi.c         **** }
  19:spi.c         **** 
  20:spi.c         **** char SPI_receive(void)
  21:spi.c         **** {
  43               		.loc 1 21 0
  44               		.cfi_startproc
  45               	/* prologue: function */
  46               	/* frame size = 0 */
  47               	/* stack size = 0 */
  48               	.L__stack_usage = 0
  49               	.L3:
  22:spi.c         **** 	while(!(SPSR & (1<<SPIF))); // Wait for reception complete 
  50               		.loc 1 22 0 discriminator 1
  51 0014 0DB4      		in __tmp_reg__,0x2d
  52 0016 07FE      		sbrs __tmp_reg__,7
  53 0018 00C0      		rjmp .L3
  23:spi.c         **** 	
  24:spi.c         **** 	return SPDR;
  54               		.loc 1 24 0
  55 001a 8EB5      		in r24,0x2e
  25:spi.c         **** }
  56               		.loc 1 25 0
  57 001c 0895      		ret
  58               		.cfi_endproc
  59               	.LFE7:
  61               	.global	SPI_transmit
  63               	SPI_transmit:
  64               	.LFB8:
  26:spi.c         **** 
  27:spi.c         **** void SPI_transmit(char byte)
  28:spi.c         **** {
  65               		.loc 1 28 0
  66               		.cfi_startproc
  67               	.LVL0:
  68               	/* prologue: function */
  69               	/* frame size = 0 */
  70               	/* stack size = 0 */
  71               	.L__stack_usage = 0
  29:spi.c         **** 	SPDR = byte; // Start transmission
  72               		.loc 1 29 0
  73 001e 8EBD      		out 0x2e,r24
  74               	.L7:
  30:spi.c         **** 
  31:spi.c         **** 	while(!(SPSR & (1<<SPIF)));
  75               		.loc 1 31 0 discriminator 1
  76 0020 0DB4      		in __tmp_reg__,0x2d
  77 0022 07FE      		sbrs __tmp_reg__,7
  78 0024 00C0      		rjmp .L7
  79               	/* epilogue start */
  32:spi.c         **** }
  80               		.loc 1 32 0
  81 0026 0895      		ret
  82               		.cfi_endproc
  83               	.LFE8:
  85               	.Letext0:
  86               		.file 2 "/usr/lib/avr/include/stdint.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 spi.c
     /tmp/ccTLD4mV.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccTLD4mV.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccTLD4mV.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccTLD4mV.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccTLD4mV.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccTLD4mV.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccTLD4mV.s:13     .text:0000000000000000 SPI_slave_init
     /tmp/ccTLD4mV.s:41     .text:0000000000000014 SPI_receive
     /tmp/ccTLD4mV.s:63     .text:000000000000001e SPI_transmit

NO UNDEFINED SYMBOLS
